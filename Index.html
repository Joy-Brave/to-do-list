<!DOCTYPE html>
<html lang="zh-Hant-TW">

<head>
    <title>Bootstrap 4 Website Example</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <style>
        .fakeimg {
            height: 200px;
            background: #aaa;
        }
        table select{
            border: 0 !important;
            padding:0 !important;
            width: 100% !important;
            height: 100% !important;
        }
        table :data-select-importance{
            border: solid 1px;
        }
        table th {
            border-top: 0px !important;
            border-bottom: 0px !important;
            position: relative;
        }

        table td {
            border-top: 0px !important;
            position: relative;
        }

        table th:first-child {
            border-radius: 5px 0 0 5px;
        }

        table th:last-child {
            border-radius: 0 5px 5px 0;
        }
        .mycol1 {
            width:10%;
  
        }

        .mycol2 {
            width:35%;
    
        }

        .mycol3 {
            width:25%;
        }

        .mycol4 {
            width:25%;
        }
        table input{
            position: absolute;
            transform:scale(0.7) translate(-40%, -40%);
            font-size: 50%;
            padding:2% !important;
            
        }

        @font-face {
            font-family: 'cwTeXYen';
            src: url('https://fonts.googleapis.com/earlyaccess/cwtexyen.css');
        }

        body {
            font-family: "Arial", "Microsoft YaHei", "黑體", "宋體", sans-serif;
        }
    </style>
</head>

<body>

    <div class="jumbotron jumbotron-fluid text-center" style="margin-bottom:10px ;">
        <h1>我的代辦事項</h1>
        <p>今日事；今日畢！</p>
    </div>
    <div class="container" style="font-size:small; text-align: center ;">
        <label for="date">日期：</label>
        <input id="date" type="date">
    </div>

    <div class="container" style="margin-top:20px;">
        <div class="row">
            <div class="col-sm-6">
                <h4 class="text-center">時間規劃</h4>
                <table class="table">
                    <thead class="thead-dark">
                        <tr>
                            <th class="mycol1">重要性</th>
                            <th class="mycol2">時間</th>
                            <th class="mycol3">項目</th>
                            <th class="mycol4">是否完成</th>
                        </tr>
                    </thead>
                    <tbody>
                       
                    </tbody>
                </table >
                <form style="background-color: bisque; padding: 1rem;padding: 0;" >
                <h6  class="text-center">新增：</h6>
                <table class="table">
                    <tbody>
                        <tr data-addRow="true" style="background-color: cadetblue;">
                            <td class="select-importance mycol1" data-importance="0">
                                    <span class="badge badge-primary">普通</span>
                            </td>
                            <td class="mycol2">
                                <input class="form-control input-sm"  type="time" 
                                 required>
                            </td>
                            <td class="mycol3">none</td>
                            <td class="mycol4">
                                <div class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" id="customCheckB2" checked>
                                    <label class="custom-control-label" for="customCheckB2"></label>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
                <div class="container" style="text-align: right;">
                    <button type="reset" class="btn btn-primary">送出</button>
                </div>
            </form>
            </div>
            <div class="col-sm-6">
                <h4 class="text-center">代辦事項</h4>
                <table class="table">
                    <thead class="thead-light">
                        <tr>
                            <th>重要性</th>
                            <th></th>
                            <th>項目</th>
                            <th>是否完成</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr data-addRow="true">
                            <td>none</td>
                            <td>none</td>
                            <td>none</td>
                            <td>
                                <div class="custom-control custom-checkbox">

                                    <input type="checkbox" class="custom-control-input" id="customCheck1" checked>
                                    
                                </div>
                            </td>
                        </tr>
                    </tbody>
                    
                </table>
                
            </div>
        </div>
    </div>

    <div id="mode-list" class="container">
        <h5>語音輸入區塊</h4>
            <p>請輸入安排的項目。</p>
            <ul class="nav nav-tabs">
                <li class="nav-item" data-mode="timeline">
                    <div class="nav-link active">時間規劃</div>
                </li>
                <li class="nav-item">
                    <div class="nav-link" data-mode="normal-list">代辦事項</div>
                </li>
            </ul>
            <div class="container" style="padding: 0;">
                <form>


                    <div class="form-group">
                        <label for="comment"></label>
                        <textarea class="form-control" rows="3" id="comment" name="text"></textarea>
                    </div>
                    <div class="container" style="text-align: right;">
                        <button type="submit" class="btn btn-primary">送出</button>
                        <button id="clean" type="reset" class="btn btn-primary">清除</button>
                    </div>
            </div>
            </form>
    </div>

    <script>
        //基本屬性
        let importanceMap=new Map();
        importanceMap.set('0',{value:"普通",class:"badge-primary"})
        importanceMap.set('1',{value:"重要",class:"badge-danger"})

        //測是預設值


        //今日日期
        let currentDate = new Date();
        function getDateFormat(date) {
            let year = date.getFullYear()
            let month = ('0' + (currentDate.getMonth() + 1))
            month = month.substring(month.length - 2, month.length)
            let day = '0' + date.getDate()
            day = day.substring(day.length - 2, day.length)
            return year + '-' + month + '-' + day
        }
        document.getElementById('date').value = getDateFormat(currentDate);
        //模式切換
        let mode = "timeline"
        const modeList = document.querySelector('#mode-list');
        modeList.addEventListener('click', function (event) {
            const target = event.target;
            if (target.className != "nav-link") return;
            let navList = modeList.querySelector('.active');
            navList.classList.toggle('active');
            target.classList.toggle('active');
            mode = target.dataset.mode;
        })
        //取消後focus on textarea
        let clean = document.querySelector("#clean")
        clean.onclick = () => confirm("確認清空文字？");
        clean.addEventListener("click", function () {
            let comment = document.querySelector("#comment");
            comment.focus();
        })
        //普通重要切換
        document.addEventListener('click', function(event){
            let target=event.target;
            if (!target.parentElement.classList.contains('select-importance')) return;
            let number= target.parentElement.dataset.importance;
            target.classList.toggle(importanceMap.get(number).class);
            target.parentElement.dataset.importance=number=String(importanceMap.size<= +number+1? 0: +number+1);
            target.classList.toggle(importanceMap.get(number).class);
            target.innerHTML=importanceMap.get(number).value;
        })
        //

    </script>
</body>

</html>
